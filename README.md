Client SDK DDelivery
================================
clientSDK для быстрой разработки клиентских решений для сервиса доставки DDelivery.

Структура директорий
-------------------

      application/        Исходники сдк
      example/            Пример создания расширения


Запуск рабочего примера
-----------------------
Для запуска примера необходимо загрузить сдк в директорию в которой будет находится модуль.
example/IntegratorAdapter.php - класс в котором необходимо переопрелить указанные методы, является связующим свеном между clientSdk и CMS
example/ajax.php - файл который является точкой входа в CMS и запускает на выполнение clientSDK
example/index.php - пример кнопки для открытия модуля  на странице оформления заказа

Запустите файл index.php в директории example/, для запуска примера достаточно использовать тестовый апи ключ.
Из коробки пример работы модуля должен запустится корректно, в дальнейшем при разработке
интеграции рекомендуется руководствоватся примером из example/

Создание интеграции
-----------------------
clientSDK содержит все механизмы для работы модуля, необходимо только выполнить несколько этапов:

1. Переопределить методы родительского  класса Adapter(пример IntegratorAdapter.php)
2. Определить учитывая особенность CMS точку входа в расширение, подключить нужные системные скрипты для CMS и вызвать все необходимые методы
для работы clientSDK(пример ajax.php)
3. Создать локальное хранилище на стороне CMS вызвав метод initStorage класса Business (Далее продумать вызов этого метода при установке модуля в CMS)
4. Привязать апи ключ магазина с центральной административной панелью (CAP)
5. Вывести способ доставки на стороне CMS(пример index.php), для этого к странице checkout необходимо подключить js файл после чего
используя свойства объекта DDeliveryIntegration
6. При окончании оформления заказа (в момент когда цмс вставляет в БД заказ и выбран способ оплаты клиентом необходимо вызвать метод)
onCmsOrderFinish класса Business
7. При изменении статуса заказа или по какомуто другому событию вызвать метод cmsSendOrder класса Business

1.Переопределить методы родительского  класса Adapter
-------------------------------------------------------
В первую очередь необходимо переопределить абстрактные методы, при необходимости можно  переопределить
родительские

```
public function getApiKey():
Получить апи ключ из настроек. Привязка с CAP происходит при первом вхождении
через точку входа по ссылке ajax.php?action=admin, при этом происходит проверка
наличия прав администратора CMS и переход в CAP где можно проводить гибкую настройку
правил доставки

public function getCmsName():
название CMS

public function getCmsVersion():
версия CMS

public function getProductCart():
получить содержание корзины. В зависимости от того  где CMS хранит содержимое корзины,
ее необходимо преобразовать в массив как в примере IntegratorAdapter.php

public function getDiscount():
получить скидку для клиента, для того чтобы отнять ее от общей стоимости заказа







```










